name: Quality pipe 
 
on: 
 pull_request: 
  types: [opened, synchronize] 
  branches: 
  - main
  - formal
  - proto
 
jobs: 
 lint: 
  runs-on: ubuntu-latest 
  steps: 
    - uses: kazutoiris/yosys-action@v1
    - name: Checkout code 
      uses: actions/checkout@v2 
      with: 
        ref: ${{ github.event.pull_request.head.sha }} 

    - name: Lint     
      uses: dalance/svlint-action@master
      with:
        files: |
          rtl/**/*.sv
      env:
        SVLINT_CONFIG: .svlint.toml
    - name: Formal verification
      run: "chmod +x ./automation/fv.sh && ./automation/fv.sh"